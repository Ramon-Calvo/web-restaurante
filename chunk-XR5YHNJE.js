import{N as u,a as o,fa as s}from"./chunk-RUVTLGDO.js";var d=class a{currentUser=s(null);authenticated=s(!1);loading=s(!1);user=this.currentUser.asReadonly();isAuthenticated=this.authenticated.asReadonly();isLoading=this.loading.asReadonly();constructor(){this.checkAuthStatus()}checkAuthStatus(){if(typeof window>"u")return;let e=localStorage.getItem("kebab-user");if(e)try{let t=JSON.parse(e);this.currentUser.set(t),this.authenticated.set(!0)}catch(t){console.error("Error parsing stored user:",t)}}async signIn(e,t){this.loading.set(!0);try{await new Promise(i=>setTimeout(i,1e3));let r={id:"user-"+Date.now(),email:e,name:"Usuario Demo",phone:"+34 600 000 000",addresses:[],favoriteItems:[],preferences:{language:"es",notifications:{orderUpdates:!0,promotions:!0,newsletter:!1,pushNotifications:!0}},createdAt:new Date};return this.currentUser.set(r),this.authenticated.set(!0),localStorage.setItem("kebab-user",JSON.stringify(r)),r}finally{this.loading.set(!1)}}async signUp(e,t,r,i){this.loading.set(!0);try{await new Promise(c=>setTimeout(c,1e3));let n={id:"user-"+Date.now(),email:e,name:r,phone:i,addresses:[],favoriteItems:[],preferences:{language:"es",notifications:{orderUpdates:!0,promotions:!0,newsletter:!1,pushNotifications:!0}},createdAt:new Date};return this.currentUser.set(n),this.authenticated.set(!0),localStorage.setItem("kebab-user",JSON.stringify(n)),n}finally{this.loading.set(!1)}}async signOut(){this.loading.set(!0);try{await new Promise(e=>setTimeout(e,500)),this.currentUser.set(null),this.authenticated.set(!1),typeof window<"u"&&localStorage.removeItem("kebab-user")}finally{this.loading.set(!1)}}async updateProfile(e){let t=this.currentUser();if(!t)throw new Error("No user logged in");let r=o(o({},t),e);return this.currentUser.set(r),typeof window<"u"&&localStorage.setItem("kebab-user",JSON.stringify(r)),r}static \u0275fac=function(t){return new(t||a)};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a};
